{% include "header.html" %}

<title>{{ instrument.location.name }}, {{ instrument.location.city.name }} &ndash; Polskie organy piszczałkowe</title>

{% include "navigation.html" %}

<div class="row">
    <div class="col-md-8">

        <h1>
            {{ instrument.location.name }}
            <small>
                {{ instrument.location.city.name }},
                {{ instrument.location.city.region.name }}
            </small>
        </h1>

        <dl class="dl-horizontal">
            <dt>Adres</dt>
            <dd>{{ instrument.location.address }}</dd>

            <dt>Liczba głosów</dt>
            <dd>{{ instrument.stops }}</dd>

            <dt>Klawiatury</dt>
            <dd>{{ instrument.keyboards }}{% if instrument.pedalboard %}+P{% endif %}</dd>

            <dt>Traktura gry</dt>
            <dd>{{ instrument.key_action }}</dd>

            <dt>Traktura rejestrów</dt>
            <dd>{{ instrument.stop_action }}</dd>
        </dl>

        <p>{{ instrument.description }}</p>

        {% for keyboard in instrument.keyboard_set.all %}
            {% if forloop.first %}<div class="row">{% endif %}
        <div class="col-sm-4">
            <h4>{{ keyboard.name }}</h4>
            <p>
                {% for stop in keyboard.stop_set.all %}
                    {{ stop.number }}. <a class="stop{% if stop.reed %} reed{% endif %}" href="{% url 'view-stop-type' stop.type.pk %}">{{ stop.name }}</a> {% if stop.length %}{{ stop.length }}'{% endif %}<br>
                {% empty %}
                    Brak głosów.
                {% endfor %}
            </p>
        </div>
        {% if forloop.counter|divisibleby:3 and not forloop.last %}</div><div class="row">{% endif %}
        {% if forloop.last %}</div>{% endif %}
        {% empty %}
            <p>Brak informacji o dyspozycji instrumentu.</p>
        {% endfor %}

        <p>{{ instrument.additional_features }}</p>

        <h2>Nagrania</h2>

        {% for recording in instrument.recording_set.all %}
            {% if forloop.first %}<ul>{% endif %}
            <li>
                <a href="{{ MEDIA_URL }}{{ recording.file.url }}">{{ recording.description }}</a>,
                wyk. <a href="{% url 'view-performer' recording.performer.pk %}">{{ recording.performer.name }}</a><br>
                <audio src="{{ MEDIA_URL }}{{ recording.file.url }}" controls></audio>
            </li>
            {% if forloop.last %}</ul>{% endif %}
        {% empty %}
            <p>Brak nagrań tego instrumentu.</p>
        {% endfor %}

    </div>

    <div class="col-md-4">
        {% for photo in instrument.photo_set.all %}
            {% if forloop.first %}<h2>Fotografie</h2>{% endif %}
            <p><img class="img-responsive" src="{{ MEDIA_URL }}{{ photo.file.url }}" alt="{{ photo.description }}"></p>
        {% endfor %}

        <h2>Lokalizacja</h2>
        <p>(google maps)</p>
    </div>
</div>

{% include "footer.html" %}